# Campaign Impact Analysis: Architecture and Design Report

## 1. Overview

Modern marketing campaigns often rely on multiple metrics—click-through rates, website visits, time on site, email engagement, etc.—to gauge success. Evaluating these metrics individually can lead to fragmented insights. This project unifies various analyses into a structured framework, enabling data-driven decisions and more accurate campaign assessments.

---

## 2. Data Exploration and Hypothesis Testing

1. **Data Ingestion & Cleaning**  
   - The dataset is loaded into a Pandas DataFrame (`df`), and key columns are identified (e.g., Age, Gender, Income, and multiple engagement metrics).

2. **Exploratory Analysis**  
   - **Boxplots**: For numeric variables (Age, Income, ClickThroughRate, etc.), boxplots show how their distributions differ between converters (Conversion = 1) and non-converters (Conversion = 0).  
   - **Countplot**: For the categorical variable (Gender), a countplot is used to compare conversion counts across categories.

3. **Hypothesis Testing**  
   - **Numeric Variables**: Two-sample t-tests and Mann-Whitney U tests assess whether metrics like Age, Income, ClickThroughRate, etc., differ significantly between converters and non-converters.  
   - **Categorical Variable (Gender)**: A chi-square test (and contingency table) checks whether Gender distribution differs significantly by conversion status.

**Key Insight**: This step identifies which metrics show strong statistical differences (e.g., TimeOnSite, EmailOpens) and which do not (e.g., SocialShares, Gender).

---

## 3. KPI Threshold Selection Using Youden’s J

For each KPI (e.g., ClickThroughRate, ConversionRate, WebsiteVisits, etc.), the following steps are performed:

1. **Train/Test Split**  
   - The data is split (70/30) into a training set (to derive thresholds) and a test set (to evaluate them).

2. **ROC Curve on Training Set**  
   - Each KPI is treated as a “score” to predict Conversion (0/1).  
   - A ROC curve is generated by varying potential cutoffs.

3. **Optimal Threshold via Youden’s J**  
   - Youden’s J = (True Positive Rate) – (False Positive Rate) is computed for each cutoff.  
   - The threshold that maximizes Youden’s J is chosen, balancing sensitivity and specificity.

4. **Test Set Evaluation**  
   - The chosen threshold is applied to the test set, and metrics like sensitivity, specificity, and F1 score are calculated.  
   - This ensures thresholds generalize beyond the training data.

**Result**: Each KPI now has a recommended cutoff that best separates converters from non-converters, according to Youden’s J.

---

## 4. Logistic Regression for Conversion Probability

1. **Model Training**  
   - A logistic regression model is trained on multiple KPIs simultaneously (e.g., ClickThroughRate, WebsiteVisits, EmailOpens, etc.) to predict conversion probability.  
   - The dataset is again split into training and test subsets, ensuring robust evaluation.

2. **Optimal Probability Threshold**  
   - The model outputs a probability of conversion for each test sample.  
   - A ROC curve is generated, and Youden’s J is used to select the optimal probability threshold.  
   - This threshold yields a binary prediction (converted vs. not converted) that maximizes sensitivity + specificity.

3. **Model Evaluation**  
   - Confusion matrix metrics (TP, FP, TN, FN), sensitivity, specificity, F1 score, and ROC-AUC are computed on the test set.  
   - These metrics confirm how effectively the logistic regression weights (coefficients) capture the relationship between KPIs and conversion.

---

## 5. Engagement Score Computation

1. **Log-Odds Calculation**  
   - For each observation, the logistic regression coefficients (weights) and intercept are combined with standardized KPI values to produce a log-odds “engagement_score.”

2. **Scaling**  
   - A MinMaxScaler transforms the log-odds engagement_score to a 0–10 scale (`scaled_engagement_score`), making it more interpretable and suitable for dashboards or reporting.

3. **KPI Hit Count**  
   - In parallel, thresholds for each KPI (from the Youden’s J analysis) are used to generate binary “met/not met” columns.  
   - Summing these columns yields a `KPI_hit_count`, indicating how many thresholds each observation meets.  
   - Comparing `KPI_hit_count` with `scaled_engagement_score` reveals a positive correlation, demonstrating that both methods capture similar aspects of engagement.

---

## 6. Business Impact

1. **Holistic View of Engagement**  
   - Combining logistic regression for probability-based insights with threshold-based KPIs offers a nuanced perspective.  
   - Marketers can see both the “big picture” aggregated engagement score and the number of individual KPI thresholds met.

2. **Data-Driven Thresholds**  
   - Youden’s J ensures each KPI cutoff is statistically justified, balancing sensitivity and specificity to maximize predictive performance.

3. **Actionable Metrics**  
   - **Aggregated Score (scaled 0–10)**: Provides a single, interpretable measure of campaign success or customer engagement.  
   - **KPI Hit Count**: Identifies which specific KPIs are underperforming or excelling, guiding targeted interventions.

4. **Flexible Implementation**  
   - The framework adapts to changes in user behavior, as logistic regression can be retrained with new data and KPI thresholds recalculated for evolving campaign conditions.

---

## 7. Conclusion

By integrating:

1. **Statistical Hypothesis Testing** (t-tests, Mann-Whitney, chi-square) for initial insights,  
2. **Threshold Selection** via Youden’s J for each KPI,  
3. **Logistic Regression** to generate a unified conversion probability, and  
4. **Aggregated Engagement Scores** for simplified reporting,

this campaign impact analysis pipeline delivers a comprehensive, data-driven strategy. It aligns multiple KPIs, captures both granular and aggregated views of customer engagement, and ultimately enables more precise, high-ROI marketing decisions.
